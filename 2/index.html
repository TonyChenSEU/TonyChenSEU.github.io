<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><!DOCTYPE html>
      <html lang="en">
      <head>
      <meta charset="UTF-8">
      <title>Widevine DRM DASH Player</title>
  <!-- 引入DASH.js库 -->
  <script src="https://cdn.jsdelivr.net/npm/dashjs@4.5.2/dist/dash.all.min.js"></script>
</head>
<body>
<video id="videoPlayer" controls width="1280" height="720"></video>

<script>
  // 配置参数
  const WIDEVINE_KEY_SYSTEM = 'com.widevine.alpha';
  const LICENSE_URL = 'https://cwip-shaka-proxy.appspot.com/no_auth';
  const MPD_URL = 'https://cdn.bitmovin.com/content/assets/art-of-motion_drm/mpds/11331.mpd';

  // 初始化播放器
  const videoElement = document.getElementById('videoPlayer');
  const player = dashjs.MediaPlayer().create();

  // 配置DRM参数
  const drmConfig = {
    'com.widevine.alpha': {
    serverURL: LICENSE_URL,
      httpRequestHeaders: {
        'Content-Type': 'application/octet-stream',
        'Origin': window.location.origin
      },
      withCredentials: false
  }
  };

  // 播放器初始化设置
  player.updateSettings({
    streaming: {
      drm: {
        systems: {
          widevine: WIDEVINE_KEY_SYSTEM
        },
        updateEnabled: true
      }
    }
  });

  // 初始化播放器
  player.initialize(videoElement, MPD_URL, true);
  player.setProtectionData(drmConfig);

  // 错误处理
  player.on(dashjs.MediaPlayer.events.ERROR, function(event) {
    console.error('播放错误:', event.error);
  });

  // 播放器准备就绪
  player.on(dashjs.MediaPlayer.events.MANIFEST_LOADED, function() {
    console.log('媒体清单加载完成');
  });
</script>
</body>
</html></title>
</head>
<body>

</body>
</html>